{"ast":null,"code":"var _jsxFileName = \"/home/aanchal/Downloads/New folder (2)/frontend/src/pages/SinglePage.jsx\",\n  _s2 = $RefreshSig$();\nimport { useEffect } from 'react';\nimport { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport Loading from '../components/Loading';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst getLocalItems = () => {\n  let list = localStorage.getItem('lists');\n  if (list !== 'null') {\n    return JSON.parse(localStorage.getItem('lists'));\n  } else {\n    return [];\n  }\n};\nconst SinglePage = () => {\n  _s2();\n  var _s = $RefreshSig$();\n  const [qty, setQty] = useState(1);\n  const [data, setData] = useState(getLocalItems());\n  const {\n    slug\n  } = useParams();\n  const {\n    loading,\n    products\n  } = useSelector(state => state.products);\n  let product = products === null || products === void 0 ? void 0 : products.find(singleProduct => singleProduct.slug === slug);\n  const submitData = id => {\n    _s();\n    const navigate = useNavigate();\n    navigate('/products/cart');\n    const prevItem = data === null || data === void 0 ? void 0 : data.find(_ref => {\n      let {\n        product_id\n      } = _ref;\n      return product_id === id;\n    });\n    if (!prevItem) {\n      window.location.reload();\n      return setData(() => [...data, {\n        total: product.price * qty,\n        product_id: product.id,\n        quantity: qty,\n        price: product.price\n      }]);\n    } else {\n      window.location.reload();\n      // Navigate('/products/cart');\n      return setData(data.map(obj => {\n        const prodDetails = products.find(_ref2 => {\n          let {\n            id\n          } = _ref2;\n          return id === obj.product_id;\n        });\n        if (obj.product_id === id) {\n          return {\n            ...obj,\n            quantity: parseInt(qty) + parseInt(parseInt(obj.quantity)),\n            total: parseInt(obj.total) + parseInt(qty) * parseInt(parseInt(prodDetails.price))\n          };\n        }\n        return obj;\n      }));\n    }\n  };\n  _s(submitData, \"CzcTeTziyjMsSrAVmHuCCb6+Bfg=\", false, function () {\n    return [useNavigate];\n  });\n  console.log(data);\n  useEffect(() => {\n    localStorage.setItem('lists', JSON.stringify(data));\n  }, [data]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: loading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container m-5 p-5\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-6\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: product === null || product === void 0 ? void 0 : product.img_src,\n              width: \"70%\",\n              height: \"250px\",\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                children: product === null || product === void 0 ? void 0 : product.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 84,\n                columnNumber: 10\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"Product Category:\", product === null || product === void 0 ? void 0 : product.category]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"Price:Rs\", product === null || product === void 0 ? void 0 : product.price]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: product === null || product === void 0 ? void 0 : product.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Quantity: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 90,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                name: \"quantity\",\n                min: \"1\",\n                max: \"100\",\n                value: qty,\n                onChange: e => setQty(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 91,\n                columnNumber: 10\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              type: \"submit\",\n              className: \"btn btn-warning text-white m-2 px-3 me-5\",\n              onClick: () => {\n                submitData(product === null || product === void 0 ? void 0 : product.id);\n              },\n              children: \"Add to cart\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 8\n          }, this), ' ']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 6\n      }, this)\n    }, void 0, false)\n  }, void 0, false);\n};\n_s2(SinglePage, \"kL2T10eubjmw/KXrLIZ+uCZF00g=\", false, function () {\n  return [useParams, useSelector];\n});\n_c = SinglePage;\nexport default SinglePage;\nvar _c;\n$RefreshReg$(_c, \"SinglePage\");","map":{"version":3,"names":["useEffect","useState","useSelector","useNavigate","useParams","Loading","getLocalItems","list","localStorage","getItem","JSON","parse","SinglePage","qty","setQty","data","setData","slug","loading","products","state","product","find","singleProduct","submitData","id","navigate","prevItem","product_id","window","location","reload","total","price","quantity","map","obj","prodDetails","parseInt","console","log","setItem","stringify","img_src","name","category","description","e","target","value"],"sources":["/home/aanchal/Downloads/New folder (2)/frontend/src/pages/SinglePage.jsx"],"sourcesContent":["import { useEffect } from 'react';\r\nimport { useState } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport {  useNavigate, useParams } from 'react-router-dom';\r\nimport Loading from '../components/Loading';\r\n\r\nconst getLocalItems = () => {\r\n\tlet list = localStorage.getItem('lists');\r\n\r\n\tif (list !== 'null') {\r\n\t\treturn JSON.parse(localStorage.getItem('lists'));\r\n\t} else {\r\n\t\treturn [];\r\n\t}\r\n};\r\n\r\nconst SinglePage = () => {\r\n\tconst [qty, setQty] = useState(1);\r\n\tconst [data, setData] = useState(getLocalItems());\r\n\t\r\n    \r\n\tconst { slug } = useParams();\r\n\r\n\tconst { loading, products } = useSelector((state) => state.products);\r\n\r\n\tlet product = products?.find((singleProduct) => singleProduct.slug === slug);\r\n\r\n\tconst submitData = (id) => {\r\n\t\tconst navigate = useNavigate();\r\n\t\tnavigate('/products/cart');\r\n\t\tconst prevItem = data?.find(({ product_id }) => product_id === id);\r\n\t\tif (!prevItem) {\r\n\t\t\twindow.location.reload();\r\n\t\t\treturn setData(() => [\r\n\t\t\t\t...data,\r\n\t\t\t\t{\r\n\t\t\t\t\ttotal: product.price * qty,\r\n\t\t\t\t\tproduct_id: product.id,\r\n\t\t\t\t\tquantity: qty,\r\n\t\t\t\t\tprice: product.price,\r\n\t\t\t\t},\r\n\t\t\t]);\r\n\t\t} else {\r\n\t\t\twindow.location.reload();\r\n\t\t\t// Navigate('/products/cart');\r\n\t\t\treturn setData(\r\n\t\t\t\tdata.map((obj) => {\r\n\t\t\t\t\tconst prodDetails = products.find(({ id }) => id === obj.product_id);\r\n\t\t\t\t\tif (obj.product_id === id) {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t...obj,\r\n\t\t\t\t\t\t\tquantity: parseInt(qty) + parseInt(parseInt(obj.quantity)),\r\n\t\t\t\t\t\t\ttotal:\r\n\t\t\t\t\t\t\t\tparseInt(obj.total) +\r\n\t\t\t\t\t\t\t\tparseInt(qty) * parseInt(parseInt(prodDetails.price)),\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn obj;\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\r\n\t\t\t);\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t};\r\n\tconsole.log(data);\r\n\tuseEffect(() => {\r\n\t\tlocalStorage.setItem('lists', JSON.stringify(data));\r\n\t}, [data]);\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{loading ? (\r\n\t\t\t\t<Loading />\r\n\t\t\t) : (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<div className='container m-5 p-5'>\r\n\t\t\t\t\t\t<div className='row'>\r\n\t\t\t\t\t\t\t<div className='col-6'>\r\n\t\t\t\t\t\t\t\t<img src={product?.img_src} width='70%' height='250px' alt='' />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='col-6'>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<h2>{product?.name}</h2>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div>Product Category:{product?.category}</div>\r\n\t\t\t\t\t\t\t\t<div>Price:Rs{product?.price}</div>\r\n\t\t\t\t\t\t\t\t<div>{product?.description}</div>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<span>Quantity: </span>\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\ttype='number'\r\n\t\t\t\t\t\t\t\t\t\tname='quantity'\r\n\t\t\t\t\t\t\t\t\t\tmin='1'\r\n\t\t\t\t\t\t\t\t\t\tmax='100'\r\n\t\t\t\t\t\t\t\t\t\tvalue={qty}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => setQty(e.target.value)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\ttype='submit'\r\n\t\t\t\t\t\t\t\t\tclassName='btn btn-warning text-white m-2 px-3 me-5'\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tsubmitData(product?.id);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tAdd to cart\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>{' '}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default SinglePage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}